<Application x:Class="ForgeModGenerator.App"
			 xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
			 xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
			 xmlns:local="clr-namespace:ForgeModGenerator"
			 StartupUri="ViewModel/Main/MainWindow.xaml"
			 xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
			 d1p1:Ignorable="d"
			 xmlns:d1p1="http://schemas.openxmlformats.org/markup-compatibility/2006"
			 xmlns:c="clr-namespace:ForgeModGenerator.Converter"
			 xmlns:vm="clr-namespace:ForgeModGenerator.ViewModel"
			 xmlns:controls="clr-namespace:ForgeModGenerator.UserControls">
	
	<Application.Resources>
		<ResourceDictionary>
			<ResourceDictionary.MergedDictionaries>
				<ResourceDictionary Source="pack://application:,,,/MaterialDesignThemes.Wpf;component/Themes/MaterialDesignTheme.Dark.xaml"/>
				<ResourceDictionary Source="pack://application:,,,/MaterialDesignThemes.Wpf;component/Themes/MaterialDesignTheme.Defaults.xaml"/>
				<ResourceDictionary Source="pack://application:,,,/MaterialDesignColors;component/Themes/Recommended/Primary/MaterialDesignColor.DeepPurple.xaml"/>
				<ResourceDictionary Source="pack://application:,,,/MaterialDesignColors;component/Themes/Recommended/Accent/MaterialDesignColor.Lime.xaml"/>

				<ResourceDictionary>
					<SolidColorBrush x:Key="PageBackground" Color="#FF424242"/>
				</ResourceDictionary>

				<ResourceDictionary>
					<vm:ViewModelLocator x:Key="Locator" d:IsDataSource="True"/>
				</ResourceDictionary>

				<ResourceDictionary>
					<c:ListStringConverter x:Key="StringListStringConverter"/>
				</ResourceDictionary>

				<ResourceDictionary>
					<c:PathNameConverter x:Key="PathToNameConverter"/>
				</ResourceDictionary>

				<ResourceDictionary>
					<ContextMenu x:Key="DefaultRemoveFileContext">
						<MenuItem Header="Remove"
								  Command="{Binding PlacementTarget.Tag.RemoveCommand, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=ContextMenu}}">
							<MenuItem.Resources>
								<c:ListStringConverter x:Key="ListStringConverter"/>
							</MenuItem.Resources>
							<MenuItem.CommandParameter>
								<MultiBinding Converter="{StaticResource ListStringConverter}">
									<Binding RelativeSource="{RelativeSource Mode=FindAncestor, AncestorType=ContextMenu}"
											 Path="PlacementTarget.Tag.Files.Paths"/>
									<Binding Path="."/>
								</MultiBinding>
							</MenuItem.CommandParameter>
						</MenuItem>
					</ContextMenu>
				</ResourceDictionary>

				<ResourceDictionary>
					<DataTemplate x:Key="DefaultFileListTemplate">
						<StackPanel>
							<controls:FileListExpander HeaderText="{Binding Path=HeaderName}"
													   Files="{Binding}"
													   AddCommand="{Binding Path=DataContext.AddCommand, RelativeSource={RelativeSource AncestorType=ListBox}}"
													   RemoveCommand="{Binding Path=DataContext.RemoveCommand, RelativeSource={RelativeSource AncestorType=ListBox}}"
													   ItemTemplate="{Binding Path=FileListExpanderItemTemplate, ElementName=ThisWindow}"/>
							<Border Background="#FF313131"
									Height="1"
									HorizontalAlignment="Stretch"
									SnapsToDevicePixels="True" />
						</StackPanel>
					</DataTemplate>
				</ResourceDictionary>

			</ResourceDictionary.MergedDictionaries>
		</ResourceDictionary>
	</Application.Resources>
</Application>